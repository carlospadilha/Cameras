var msgIndex=1,logIndex=1,idIndex=1,jsonReqBusy=!1,loadingTimer,msgTimer,imgError=' onerror=this.src="img/blank.png"',screenWidth=981,dadoMem,jsonReqBusy=!1,dadoMem,CP={UTF8:function(t){if(!t)return t;for(var e=-1,n=t.search(/[\xC2-\xF4][\x80-\xBF]/);n>=0;n=t.substr(e+1).search(/[\xC2-\xF4][\x80-\xBF]/))e+=++n,t=t.charCodeAt(e)<224?t.substr(0,e)+String.fromCharCode(64*(31&t.charCodeAt(e))+(63&t.charCodeAt(e+1))&4095)+t.substr(e+2):t.substr(0,e)+String.fromCharCode(4096*(31&t.charCodeAt(e))+64*(63&t.charCodeAt(e+1))+(63&t.charCodeAt(e+2))&65535)+t.substr(e+3);return t},encodeUTF8:function(t){t=(t+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n");for(var e="",n=0,r=0,a=t.length,o=0;a>o;o++){var i=t.charCodeAt(o),s=null;128>i?r++:s=i>127&&2048>i?String.fromCharCode(i>>6|192)+String.fromCharCode(63&i|128):String.fromCharCode(i>>12|224)+String.fromCharCode(i>>6&63|128)+String.fromCharCode(63&i|128),null!=s&&(r>n&&(e+=t.substring(n,r)),e+=s,n=r=o+1)}return r>n&&(e+=t.substring(n,t.length)),e},FindCRC:function(t){function e(t){return t>=0?t:t>>>=0}var n=4294967295,r="";for(i=0;i<t.length;i++){var a=t.charAt(i);r+="z">=a?a.toLowerCase():a}t=r;for(var o=0;o<t.length;o++){n^=t.charCodeAt(o)<<24;for(var i=0;8>i;i++)2147483648&e(n)?n=n<<1^79764919:n<<=1}for(0>n&&(n>>>=0),n=n.toString(16);n.length<8;)n="0"+n;return n},HMStoS:function(t){if(t){var e=0;":"==t.substr(-6,1)&&(e=3600*parseInt(t.substr(-8,2),10)),t=e+60*parseInt(t.substr(-5,2),10)+parseInt(t.substr(-2,2),10)}return t},bar1to2:function(t){return t.replace(/\\\\/g,"\\").replace(/\\/g,"\\\\")},pausecomp:function(t){var e=new Date,n=null;do n=new Date;while(t>n-e)},charToHex:function(t){for(var e="",n=0;n<t.length;n++)e+=CP.decToHex(t.charCodeAt(n))+" ";return e},charHex:function(t){if(!t)return t;for(var e="",n=0;n<t.length;n++)e+=CP.decToHex(t.charCodeAt(n));return e},hexToChar:function(t){if(!t)return t;for(var e="",n=0;n<t.length;n+=2)e+=String.fromCharCode(parseInt(t.substr(n,2),16));return e},hexToDec:function(t){return"A"==t?10:"B"==t?11:"C"==t?12:"D"==t?13:"E"==t?14:"F"==t?15:t},decToHex:function(t){for(var e=Number(t).toString(16).toUpperCase();e.length<2;)e="0"+e;return e},sortByLabel:function(t,e){var n=t.label.toLowerCase(),r=e.label.toLowerCase();return r>n?-1:n>r?1:0},sortByFile:function(t,e){var n=t.file.toLowerCase();n=n.substr(n.lastIndexOf("\\")+n.lastIndexOf("/")+2);var r=e.file.toLowerCase();return r=r.substr(r.lastIndexOf("\\")+r.lastIndexOf("/")+2),r>n?-1:n>r?1:0},msgStart:function(t){listAddScroll("l50000",msgIndex++ +". "+t)},msgLog:function(t){CP.listAdd("l50000",logIndex++ +".  "+t)},msgOK:function(t){CP.msgStart(JSON.parse(t).result,!0)},msgErr:function(t,e){CP.setJoin("d1330",t),$("#d1330").fadeIn(),e&&CP.msgStart(t),clearTimeout(msgTimer),msgTimer=setTimeout(function(){$("#d1330").fadeOut()},5e3)},setJoin:function(t,e){return t="#"+t,1==e?void $(t).addClass("on"):void(0!==e?$(t).text(e):$(t).removeClass("on"))},setClass:function(t,e){return t="."+t,1==e?void $(t).addClass("on"):void(0!==e?$(t).text(e):$(t).removeClass("on"))},getJoin:function(t){return"on"==$("#"+t).attr("class").match(/on/i)},fileFolder:function(t){return t.substr(0,t.lastIndexOf("\\")+t.lastIndexOf("/")+2)},fileOfPath:function(t){return CP.UTF8(t.substr(t.lastIndexOf("\\")+t.lastIndexOf("/")+2))},dataStore:function(t,e){$.ajax({url:"php/data.php",type:"POST",data:{data:JSON.stringify(t),type:"w"},error:function(t,n){e(n)},success:function(t){e(t)}})},dataRead:function(t){$.ajax({url:"php/data.php",type:"POST",data:{data:"",type:"r"},success:function(e){""==e|!e&&(e='{"adm":"solrac","ipLocal":"127.0.0.1","userTime":1381974358653}'),t($.parseJSON(e))}})},readWrite:function(t,e,n,r,a){$.ajax({url:"php/readWrite.php",type:"POST",data:{file:t,data:"json"==r?JSON.stringify(e):e,type:n},dataType:r,error:function(t,e){a(e)},success:function(t){a(t)}})},salvaDado:function(t,e,n){CP.dataRead(function(r){r[t]=e,CP.dataStore(r,n)})},recuperaDado:function(t,e){CP.dataRead(function(n){e(n[t])})},proxyAjax:function(t,e,n,r){$.ajax({url:"php/http_request.php",type:"POST",data:{url:t,postData:e},timeout:n,error:function(t,e){r(e?e:null)},success:function(t){r(t?t:null)}})},jsonRequest:function(t,e,n){CP.jsonRequest2(t,',"params":'+e,n)},jsonRequest2:function(t,e,n){jsonReqBusy=!0,CP.setJoin("s9995",idIndex);var r='{"jsonrpc":"2.0","method":"'+t+'"'+e+',"id":'+idIndex++ +"}";CP.proxyAjax(IPPort+"/jsonrpc",r,"15000",function(e){e&&("timeout"==e&&(CP.msgErr("Erro jsonRequest: time out"),e=null),/\"error\"/.test(e)&&(CP.msgErr("*** JSON "+JSON.parse(e).error.message+", idx:"+idIndex+" *** "+t),CP.msgLog(e),e=null),"{"!=e.substr(0,1)&&(CP.msgErr(e),CP.msgLog(e),e=null)),e||CP.rstLoading(),jsonReqBusy=!1,n(e)})},sendUdpRfx:function(t,e,n,r,a){$.ajax({url:"php/udpRfx.php",type:"POST",data:{port:e,data:n,ip:t},timeout:r,error:function(t,e){a(e)},success:function(t){a(CP.hexToChar(t))}})},sendUdp:function(t,e,n,r,a){$.ajax({url:"php/udp.php",type:"POST",data:{port:e,data:CP.charHex(n),ip:t},timeout:r,error:function(t,e){a(e)},success:function(t){a(CP.hexToChar(t))}})},sendTcp:function(t,e,n,r,a,o){$.ajax({url:"php/tcp.php",type:"POST",data:{ip:t,port:e,data:n,rcv:r},timeout:a,error:function(t,e){o("status:"+e)},success:function(t){o(t)}})},sendTcp2:function(t,e,n,r,a,o,i,s){$.ajax({url:"php/tcp.php",type:"POST",data:{ip:t,port:e,data1:n,data2:r,data3:a,data4:o,data5:i},error:function(t,e){s("status:"+e)},success:function(t){s(t)}})},recTcp:function(t,e,n,r,a,o,i,s){$.ajax({url:"php/tcp_read.php",type:"POST",data:{ip:t,port:e,data1:n,data2:r,data3:a,data4:o,data5:i},error:function(t,e){s(e)},success:function(t){s(t)}})},doPost:function(t,e,n){CP.proxyAjax(t,e,"5000",function(t){n(t)})},pageName:function(){var t=window.location.pathname;return t.substring(t.lastIndexOf("/")+1)},ledOnOff:function(t,e,n){null!=e&&(n||(n="bl"),$("#"+t).removeClass("r").removeClass("y").removeClass("g").removeClass("bl"),e&&$("#"+t).addClass(n))},btnLedOnOff:function(t,e){null!=e&&(e?$("#"+t).addClass("on"):$("#"+t).removeClass("on"))},setLoading:function(){$("#d1305").show(),clearTimeout(loadingTimer),loadingTimer=setTimeout(CP.rstLoading,15e3)},rstLoading:function(){$("#d1305").hide(),CP.setJoin("d37",0),CP.setJoin("d38",0)},scrollList:function(t){var e=document.getElementById(t),n=e.getElementsByTagName("li");e.appendChild(n[0])},listAdd:function(t,e,n,r,a,o,i){n||(n="");var s=document.getElementById(t),d=document.createElement("li"),u=document.createElement("a");r&&(u.innerHTML='<img src="'+r+'"'+imgError+"> "),i?(u.href="#",u.innerHTML+="<div>"+e+"</div>"):(u.href="javascript:onBtn"+t+'("'+CP.bar1to2(n)+'")',u.innerHTML+=e+'<img src="../img/blank.png" class="abs" style="left:2px;width:'+(ipadWin?395:250)+'px">'),d.appendChild(u),a&&(u=document.createElement("a"),u.href=a,r&&(u.innerHTML='<img src="'+o+'" class="abs" style="left:'+(ipadWin?440:283)+'px">'),d.appendChild(u)),s.appendChild(d)},listAddMusic:function(t,e,n,r,a,o,i,s,d,u,c,l,f){function p(t,e,n,r){var a=document.createElement("a");a.href='javascript:onBtnl12005("'+CP.bar1to2(n)+'")',r&&(a.innerHTML='<img src="'+r+'"'+imgError+"> "),a.innerHTML=a.innerHTML+"<div>"+e+"</div>",h.appendChild(a)}var m=document.getElementById(t),h=document.createElement("li");p(t,e,n,r),p(t,a,o,i),p(t,s,d,u),p(t,c,l,f),m.appendChild(h)},listAddMenu:function(t,e,n){n||(n="");var r=document.getElementById(t),a=document.createElement("li"),o=document.createElement("a");o.href="javascript:onBtn"+t+'("'+CP.bar1to2(n)+'")',o.innerHTML+=e,a.appendChild(o),r.appendChild(a)},imgAdd:function(t,e,n,r,a,o,i,s){var d=document.getElementById(t);d.innerHTML='<img id="'+e+'" src="'+n+'" alt="" class="abs" style="left:'+o+"px;top:"+i+"px;width:"+r+"px;height:"+a+"px;"+s+'">'},listAdd2:function(t,e){var n=JSON.parse(e);CP.listAdd(t,n.txt,n.pth,n.img)},listClear:function(t){$("#"+t).empty()},setListButton:function(t,e){$("#"+t).find("li").each(function(){var n=$(this).find("a").slice(0,1).attr("href"),r="javascript:onBtn"+t+'("'+CP.bar1to2(e)+'")';n==r?$(this).addClass("item_selected"):$(this).removeClass("item_selected")})},listSearch:function(t,e,n){var r=texto=null;$("#"+t).find("li").each(function(t){e==t&&(r=$(this).find("a").slice(0,1).attr("href"),texto=$(this).text())}),n(texto,r)},listSearchPath:function(t,e){var n=null;return $("#"+t).find("li").each(function(r){var a=$(this).find("a").slice(0,1).attr("href"),o="javascript:onBtn"+t+'("'+e+'")';a==o&&(n=r)}),n},playSound:function(t){document.getElementById(t).play()},retiraAcento:function(t){return"À"==t||"Á"==t?"A":"É"==t?"E":"Ó"==t?"O":"Ú"==t?"U":t},checkUser:function(t){$.ajax({url:"php/getipclient.php",success:function(e){dadoMem=t,CP.msgErr("IP client: "+e,!0);e.substr(0,9);inicCam(!0)}})},checkPass:function(t){$("#d1306").fadeIn();var e=t.user.value.toLowerCase();return dadoMem[e]!=t.pass.value?(t.pass.value="",$("#d1306").fadeOut(),alert("Usuário e/ou Senha errados"),CP.checkUser(dadoMem)):(dadoMem.userTime=(new Date).getTime(),$("#login").fadeOut(),$("#d1306").fadeOut(),inicCam(!1),void 0)},fadeOutAll:function(t){for(var e=0;e<t.length;e++)$("#"+t[e]).fadeOut()},hide:function(t){for(var e=0;e<t.length;e++)$("#"+t[e]).hide()},remOn:function(t){for(var e=0;e<t.length;e++)$("#"+t[e]).removeClass("on")},addOn:function(t){for(var e=0;e<t.length;e++)$("#"+t[e]).addClass("on")},clrImg:function(t){for(var e=0;e<t.length;e++)$("#"+t[e]).attr("src","#").hide()},setDiv:function(e){var n=document.getElementById(e[0]);n.innerHTML="";for(var r=0;r<e.length-1;){var a=cls=l=t=txt="";e[++r]&&(a='id="'+e[r]+'" '),e[++r]&&(cls='class="'+e[r]+'" '),e[++r]&&(l="left:"+e[r]+"px;"),e[++r]&&(t="top:"+e[r]+"px"),e[++r]&&(txt=e[r]),n.innerHTML+="<div "+a+cls+'" style="'+l+t+'">'+txt+"</div>"}},minifier:function(t,e){$.ajax({url:"php/minifier.php",type:"POST",data:{file:t},error:function(t,n){e(n)},success:function(t){e(t)}})}};