var cvs={pi_x_2:2*Math.PI,solarSystem:function(){function t(){var s=document.getElementById("canvas").getContext("2d");s.globalCompositeOperation="destination-over",s.save(),s.clearRect(0,0,300,300),s.translate(150,150);var o=new Date,r=o.getSeconds(),h=o.getMilliseconds();s.rotate(cvs.pi_x_2/60*r+cvs.pi_x_2/6e4*h),s.translate(105,0),s.fillStyle="rgba(0, 0, 0, 0.4)",s.fillRect(0,-12,50,24),s.drawImage(n,-12,-12),s.rotate(cvs.pi_x_2/6*r+cvs.pi_x_2/6e3*h),s.translate(0,28.5),s.drawImage(e,-3.5,-3.5),s.restore(),s.beginPath(),s.strokeStyle="rgba(0, 153, 255, 0.4)",s.arc(150,150,105,0,cvs.pi_x_2,!1),s.stroke(),s.drawImage(i,0,0,300,300),window.requestAnimationFrame(t)}var i=new Image,e=new Image,n=new Image;i.src="../img/Canvas_sun.png",e.src="../img/Canvas_moon.png",n.src="../img/Canvas_earth.png",window.requestAnimationFrame(t)},clock:function(){var t=new Date,i=t.getSeconds(),e=t.getMinutes(),n=t.getHours(),s=Math.PI/6,o=.4,r=document.getElementById("clock").getContext("2d"),h=function(t){window.setTimeout(t,300)};r.save(),r.clearRect(0,0,150,150),r.translate(150*o,150*o),r.scale(o,o),r.rotate(-Math.PI/2),r.strokeStyle="black",r.fillStyle="rgba(200, 200, 200, 0.4)",r.fill(),r.lineCap="round",r.save(),r.lineWidth=8;for(var a=0;12>a;a++)r.beginPath(),r.rotate(s),r.moveTo(100,0),r.lineTo(120,0),r.stroke();for(r.restore(),r.save(),r.lineWidth=5,a=0;60>a;a++)a%5!=0&&(r.beginPath(),r.moveTo(117,0),r.lineTo(120,0),r.stroke()),r.rotate(Math.PI/30);r.restore(),n=n>=12?n-12:n,r.save(),r.rotate(n*s+Math.PI/360*e+Math.PI/21600*i),r.lineWidth=12,r.beginPath(),r.moveTo(-20,0),r.lineTo(80,0),r.stroke(),r.restore(),r.save(),r.rotate(Math.PI/30*e+Math.PI/1800*i),r.lineWidth=8,r.beginPath(),r.moveTo(-28,0),r.lineTo(112,0),r.stroke(),r.restore(),r.save(),r.rotate(i*Math.PI/30),r.strokeStyle="#D40000",r.lineWidth=6,r.beginPath(),r.moveTo(-30,0),r.lineTo(83,0),r.stroke(),r.fillStyle="#D40000",r.beginPath(),r.arc(0,0,10,0,cvs.pi_x_2,!0),r.fill(),r.beginPath(),r.arc(95,0,10,0,cvs.pi_x_2,!0),r.stroke(),r.fillStyle="black",r.beginPath(),r.arc(0,0,4,0,cvs.pi_x_2,!0),r.fill(),r.restore(),r.beginPath(),r.lineWidth=7,r.strokeStyle="rgba(70, 120, 255, 0.7)",r.arc(0,0,142,0,cvs.pi_x_2,!0),r.stroke(),r.restore(),h(cvs.clock)}};!function(t){function i(){s.clearRect(0,0,n.width,n.height),o.update(),o.draw(),a(i)}function e(){var e=function(t){return t.originalEvent.targetTouches?t.originalEvent.targetTouches[0]:t};t(n).on(touchDev?"touchstart":"mousedown",function(t){var i=e(t);d.button=touchDev?1:i.which,d.px=d.x,d.py=d.y;var s=n.getBoundingClientRect();d.x=i.clientX-s.left,d.y=i.clientY-s.top,d.down=!0,t.preventDefault()}).on("touchend mouseup touchcancel",function(t){d.down=!1,t.preventDefault()}).on(touchDev?"touchmove":"mousemove",function(t){var i=e(t);d.px=d.x,d.py=d.y;var s=n.getBoundingClientRect();d.x=i.clientX-s.left,d.y=i.clientY-s.top,t.preventDefault()}),r=n.width-1,h=n.height-1,s.strokeStyle="#888",o=new m,i()}t.fn.cloth=function(){return n?(o=new m,i()):(n=this[0],s=n.getContext("2d"),n.width=560,n.height=350,e()),this};var n,s,o,r,h,a=function(t){window.setTimeout(t,1e3/60)},c=3,p=20,l=5,v=1200,u=30,y=50,g=20,f=7,x=60,d={down:!1,button:1,x:0,y:0,px:0,py:0},_=function(t,i){this.x=t,this.y=i,this.px=t,this.py=i,this.vx=0,this.vy=0,this.pin_x=null,this.pin_y=null,this.constraints=[]};_.prototype.update=function(t){if(d.down){var i=this.x-d.x,e=this.y-d.y,n=Math.sqrt(i*i+e*e);1==d.button?p>n&&(this.px=this.x-1.5*(d.x-d.px),this.py=this.y-1.5*(d.y-d.py)):l>n&&(this.constraints=[])}this.add_force(0,v);var s=t*t/2,o=this.x+.99*(this.x-this.px)+this.vx*s,r=this.y+.99*(this.y-this.py)+this.vy*s;this.px=this.x,this.py=this.y,this.x=o,this.y=r,this.vy=this.vx=0},_.prototype.draw=function(){if(!(this.constraints.length<=0))for(var t=this.constraints.length;t--;)this.constraints[t].draw()},_.prototype.resolve_constraints=function(){if(null!=this.pin_x&&null!=this.pin_y)return this.x=this.pin_x,void(this.y=this.pin_y);for(var t=this.constraints.length;t--;)this.constraints[t].resolve();this.x>r?this.x=2*r-this.x:this.x<1&&(this.x=2-this.x),this.y>h?this.y=2*h-this.y:this.y<1&&(this.y=2-this.y)},_.prototype.attach=function(t){this.constraints.push(new w(this,t))},_.prototype.remove_constraint=function(t){for(var i=this.constraints.length;i--;)this.constraints[i]==t&&this.constraints.splice(i,1)},_.prototype.add_force=function(t,i){this.vx+=t,this.vy+=i},_.prototype.pin=function(t,i){this.pin_x=t,this.pin_y=i};var w=function(t,i){this.p1=t,this.p2=i,this.length=f};w.prototype.resolve=function(){var t=this.p1.x-this.p2.x,i=this.p1.y-this.p2.y,e=Math.sqrt(t*t+i*i),n=(this.length-e)/e;e>x&&this.p1.remove_constraint(this);var s=t*n*.5,o=i*n*.5;this.p1.x+=s,this.p1.y+=o,this.p2.x-=s,this.p2.y-=o},w.prototype.draw=function(){s.moveTo(this.p1.x,this.p1.y),s.lineTo(this.p2.x,this.p2.y)};var m=function(){this.points=[];for(var t=n.width/2-y*f/2,i=0;u>=i;i++)for(var e=0;y>=e;e++){var s=new _(t+e*f,g+i*f);0!=e&&s.attach(this.points[this.points.length-1]),0==i&&s.pin(s.x,s.y),0!=i&&s.attach(this.points[e+(i-1)*(y+1)]),this.points.push(s)}};m.prototype.update=function(){for(var t=this.points.length,i=t,e=c;e--;)for(i=t;i--;)this.points[i].resolve_constraints();for(;t--;)this.points[t].update(.016)},m.prototype.draw=function(){s.beginPath();for(var t=o.points.length;t--;)o.points[t].draw();s.stroke()}}(jQuery);